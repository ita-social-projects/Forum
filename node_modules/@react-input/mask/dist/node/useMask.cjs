"use strict";var e=require("./utils-Dg7UrSha.js"),r=require("react"),t=require("@react-input/core");var a=function(e){return function(){for(var r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];return new e("".concat(t.join("\n\n"),"\n"))}};module.exports=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=n.mask,o=void 0===l?"":l,i=n.replacement,p=void 0===i?{}:i,c=n.showMask,s=void 0!==c&&c,u=n.separate,v=void 0!==u&&u,d=n.track,h=n.modify,m=n.onMask,f="string"==typeof p?e.formatToReplacementObject(p):p,k=r.useRef(null);return t.useInput({init:function(e){var r=e.controlled,t=e.initialValue;"production"!==process.env.NODE_ENV&&function(e){var r=e.initialValue,t=e.mask,n=e.replacement;r.length>t.length&&console.error(a(Error)("The initialized value of the `value` or `defaultValue` property is longer than the value specified in the `mask` property. Check the correctness of the initialized value in the specified property.",'Invalid value: "'.concat(r,'".')));var l=Object.keys(n).filter((function(e){return e.length>1}));l.length>0&&console.error(a(Error)("Object keys in the `replacement` property are longer than one character. Replacement keys must be one character long. Check the correctness of the value in the specified property.","Invalid keys: ".concat(l.join(", "),".")));for(var o=t.slice(0,r.length),i=-1,p=0;p<o.length;p++){var c=Object.prototype.hasOwnProperty.call(n,o[p]);if(!(o[p]===r[p]||c&&n[o[p]].test(r[p]))){i=p;break}}-1!==i&&console.error(a(Error)("An invalid character was found in the initialized property value `value` or `defaultValue` (index: ".concat(i,"). Check the correctness of the initialized value in the specified property."),'Invalid value: "'.concat(r,'".')))}({initialValue:t,mask:o,replacement:f}),t=r||t?t:s?o:"";var n={mask:o,replacement:f,showMask:s,separate:v};return k.current={value:t,props:n,fallbackProps:n},{value:t}},tracking:function(r){var a,n=r.inputType,l=r.previousValue,i=r.addedValue,p=r.changeStart,c=r.changeEnd;if(null===k.current)throw new t.SyntheticChangeError("The state has not been initialized.");k.current.value!==l?k.current.props=k.current.fallbackProps:k.current.fallbackProps=k.current.props;var u=e.unformat$1(l,{end:p,mask:k.current.props.mask,replacement:k.current.props.replacement,separate:k.current.props.separate}),m=RegExp("[^".concat(Object.keys(k.current.props.replacement).join(""),"]"),"g"),g=k.current.props.mask.replace(m,"");u&&(u=e.filter(u,{replacementChars:g,replacement:k.current.props.replacement,separate:k.current.props.separate}));var y=null==d?void 0:d(e._objectSpread2(e._objectSpread2({},"insert"===n?{inputType:n,data:i}:{inputType:n,data:null}),{},{value:l,selectionStart:p,selectionEnd:c}));if(!1===y)throw new t.SyntheticChangeError("Custom trekking stop.");if(null===y?i="":!0!==y&&void 0!==y&&(i=y),i&&(i=e.filter(i,{replacementChars:g.slice(u.length),replacement:k.current.props.replacement,separate:!1})),"insert"===n&&""===i)throw new t.SyntheticChangeError("The character does not match the key value of the `replacement` object.");var w=e.unformat$1(l,{start:c,mask:k.current.props.mask,replacement:k.current.props.replacement,separate:k.current.props.separate});if(k.current.props.separate){var b=k.current.props.mask.slice(p,c).replace(m,""),j=b.length-i.length;j<0?w=w.slice(-j):j>0&&(w=b.slice(-j)+w)}w&&(w=e.filter(w,{replacementChars:g.slice(u.length+i.length),replacement:k.current.props.replacement,separate:k.current.props.separate}));var E=u+i+w,V=null!==(a=null==h?void 0:h(E))&&void 0!==a?a:{},C=V.mask,T=void 0===C?o:C,O=V.replacement,x=void 0===O?f:O,M=V.showMask,P=void 0===M?s:M,S=V.separate,R=void 0===S?v:S;"string"==typeof x&&(x=e.formatToReplacementObject(x));var z=function(r,t){var a=t.mask,n=t.replacement,l=t.showMask,o=e.format$1(r,{mask:a,replacement:n,showMask:l}),i=e.formatToParts$1(o,{mask:a,replacement:n}),p=e.generatePattern({mask:a,replacement:n}),c=e.generatePattern({mask:a,replacement:n},!0);return{value:o,input:r,parts:i,pattern:p,isValid:RegExp(c).test(o)}}(E,{mask:T,replacement:x,showMask:P}),I=function(e){var r,t,a,n=e.inputType,l=e.value,o=e.addedValue,i=e.beforeChangeValue,p=e.parts,c=e.replacement,s=e.separate,u=p.filter((function(e){var r=e.type;return"input"===r||s&&"replacement"===r})),v=null===(r=u[i.length+o.length-1])||void 0===r?void 0:r.index,d=null===(t=u[i.length-1])||void 0===t?void 0:t.index,h=null===(a=u[i.length+o.length])||void 0===a?void 0:a.index;if("insert"===n){if(void 0!==v)return v+1;if(void 0!==h)return h;if(void 0!==d)return d+1}if("deleteForward"===n){if(void 0!==h)return h;if(void 0!==d)return d+1}if("deleteBackward"===n){if(void 0!==d)return d+1;if(void 0!==h)return h}var m=l.split("").findIndex((function(e){return Object.prototype.hasOwnProperty.call(c,e)}));return-1!==m?m:l.length}({inputType:n,value:z.value,addedValue:i,beforeChangeValue:u,parts:z.parts,replacement:x,separate:R});return k.current.value=z.value,k.current.props={mask:T,replacement:x,showMask:P,separate:R},{value:z.value,selectionStart:I,selectionEnd:I,__detail:z}},eventType:"input-mask",eventHandler:m})};
