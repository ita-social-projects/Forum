import{c as e,d as r,g as t,e as a,h as n,i as l,b as o}from"./utils-Db9stttu.js";import{useRef as i}from"react";import{useInput as p,SyntheticChangeError as s}from"@react-input/core";var c=function(e){return function(){for(var r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];return new e("".concat(t.join("\n\n"),"\n"))}};function u(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},v=u.mask,d=void 0===v?"":v,h=u.replacement,m=void 0===h?{}:h,f=u.showMask,k=void 0!==f&&f,g=u.separate,y=void 0!==g&&g,w=u.track,b=u.modify,V=u.onMask,j="string"==typeof m?a(m):m,E=i(null);return p({init:function(e){var r=e.controlled,t=e.initialValue;"production"!==process.env.NODE_ENV&&function(e){var r=e.initialValue,t=e.mask,a=e.replacement;r.length>t.length&&console.error(c(Error)("The initialized value of the `value` or `defaultValue` property is longer than the value specified in the `mask` property. Check the correctness of the initialized value in the specified property.",'Invalid value: "'.concat(r,'".')));var n=Object.keys(a).filter((function(e){return e.length>1}));n.length>0&&console.error(c(Error)("Object keys in the `replacement` property are longer than one character. Replacement keys must be one character long. Check the correctness of the value in the specified property.","Invalid keys: ".concat(n.join(", "),".")));for(var l=t.slice(0,r.length),o=-1,i=0;i<l.length;i++){var p=Object.prototype.hasOwnProperty.call(a,l[i]);if(!(l[i]===r[i]||p&&a[l[i]].test(r[i]))){o=i;break}}-1!==o&&console.error(c(Error)("An invalid character was found in the initialized property value `value` or `defaultValue` (index: ".concat(o,"). Check the correctness of the initialized value in the specified property."),'Invalid value: "'.concat(r,'".')))}({initialValue:t,mask:d,replacement:j}),t=r||t?t:k?d:"";var a={mask:d,replacement:j,showMask:k,separate:y};return E.current={value:t,props:a,fallbackProps:a},{value:t}},tracking:function(i){var p,c=i.inputType,u=i.previousValue,v=i.addedValue,h=i.changeStart,m=i.changeEnd;if(null===E.current)throw new s("The state has not been initialized.");E.current.value!==u?E.current.props=E.current.fallbackProps:E.current.fallbackProps=E.current.props;var f=n(u,{end:h,mask:E.current.props.mask,replacement:E.current.props.replacement,separate:E.current.props.separate}),g=RegExp("[^".concat(Object.keys(E.current.props.replacement).join(""),"]"),"g"),V=E.current.props.mask.replace(g,"");f&&(f=l(f,{replacementChars:V,replacement:E.current.props.replacement,separate:E.current.props.separate}));var C=null==w?void 0:w(o(o({},"insert"===c?{inputType:c,data:v}:{inputType:c,data:null}),{},{value:u,selectionStart:h,selectionEnd:m}));if(!1===C)throw new s("Custom trekking stop.");if(null===C?v="":!0!==C&&void 0!==C&&(v=C),v&&(v=l(v,{replacementChars:V.slice(f.length),replacement:E.current.props.replacement,separate:!1})),"insert"===c&&""===v)throw new s("The character does not match the key value of the `replacement` object.");var T=n(u,{start:m,mask:E.current.props.mask,replacement:E.current.props.replacement,separate:E.current.props.separate});if(E.current.props.separate){var x=E.current.props.mask.slice(h,m).replace(g,""),M=x.length-v.length;M<0?T=T.slice(-M):M>0&&(T=x.slice(-M)+T)}T&&(T=l(T,{replacementChars:V.slice(f.length+v.length),replacement:E.current.props.replacement,separate:E.current.props.separate}));var O=f+v+T,z=null!==(p=null==b?void 0:b(O))&&void 0!==p?p:{},P=z.mask,I=void 0===P?d:P,R=z.replacement,S=void 0===R?j:R,_=z.showMask,A=void 0===_?k:_,N=z.separate,B=void 0===N?y:N;"string"==typeof S&&(S=a(S));var D=function(a,n){var l=n.mask,o=n.replacement,i=n.showMask,p=e(a,{mask:l,replacement:o,showMask:i}),s=r(p,{mask:l,replacement:o}),c=t({mask:l,replacement:o}),u=t({mask:l,replacement:o},!0);return{value:p,input:a,parts:s,pattern:c,isValid:RegExp(u).test(p)}}(O,{mask:I,replacement:S,showMask:A}),F=function(e){var r,t,a,n=e.inputType,l=e.value,o=e.addedValue,i=e.beforeChangeValue,p=e.parts,s=e.replacement,c=e.separate,u=p.filter((function(e){var r=e.type;return"input"===r||c&&"replacement"===r})),v=null===(r=u[i.length+o.length-1])||void 0===r?void 0:r.index,d=null===(t=u[i.length-1])||void 0===t?void 0:t.index,h=null===(a=u[i.length+o.length])||void 0===a?void 0:a.index;if("insert"===n){if(void 0!==v)return v+1;if(void 0!==h)return h;if(void 0!==d)return d+1}if("deleteForward"===n){if(void 0!==h)return h;if(void 0!==d)return d+1}if("deleteBackward"===n){if(void 0!==d)return d+1;if(void 0!==h)return h}var m=l.split("").findIndex((function(e){return Object.prototype.hasOwnProperty.call(s,e)}));return-1!==m?m:l.length}({inputType:c,value:D.value,addedValue:v,beforeChangeValue:f,parts:D.parts,replacement:S,separate:B});return E.current.value=D.value,E.current.props={mask:I,replacement:S,showMask:A,separate:B},{value:D.value,selectionStart:F,selectionEnd:F,__detail:D}},eventType:"input-mask",eventHandler:V})}export{u as default};
